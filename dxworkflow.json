{
  "name": "TSO500_reports_workflow_v1.0.0",
  "title": "TSO500_reports_workflow_v1.0.0",
  "summary": "Workflow to generate Athena coverage report and Excel workbook from TSO500 local app output",
  "stages": [
    {
      "id": "stage-GFQZjB84b0bxz4Yg1y3ygKJZ",
      "executable": "applet-FvyXygj433GbKPPY0QY8ZKQG",
      "folder": "multi_fastqc_v1.1.0"
    },
    {
      "id": "stage-GF22j384b0bpYgYB5fjkk34X",
      "executable": "applet-Fxq07gQ433Gyz14j5ZZ1fzk1",
      "folder": "eggd_mosdepth_v1.0.1",
      "input": {
        "bed": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-FkkZQ1Q433GYXZ892pzkgvbP"
          }
        }
      }
    },
    {
      "id": "stage-GF22GJQ4b0bjFFxG4pbgFy5V",
      "executable": "app-eggd_athena/1.4.0",
      "folder": "athena_v1.4.0",
      "input": {
        "panel_bed": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-G4F6jX04ZFVV3JZJG62ZQ5yJ"
          }
        },
        "exons_file": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-Fq18Yp0433GjB7172630p9Yv"
          }
        },
        "mosdepth_files": [
          {
            "$dnanexus_link": {
              "stage": "stage-GF22j384b0bpYgYB5fjkk34X",
              "outputField": "mosdepth_output"
            }
          }
        ],
        "per_chromosome_coverage": true,
        "thresholds": "50,100,150,250",
        "cutoff_threshold": 100,
        "summary": true
      }
    },
    {
      "id": "stage-GF25f384b0bVZkJ2P46f79xy",
      "executable": "app-eggd_tso500_rescue/1.0.0",
      "folder": "TSO500_rescue_1.0.0",
      "input": {
        "fasta_tar": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-F3zxG0Q4fXX9YFjP1v5jK9jf"
          }
        },
        "hotspot_vcf": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-GFGVxxQ4f4z4yz2q38VYz02X"
          }
        }
      }
    },
    {
      "id": "stage-GF25PqQ4b0bQjvBVP4Bb5pJ0",
      "executable": "app-eggd_vep/1.1.0",
      "folder": "vep_1.1.0",
      "input": {
        "vcf": {
          "$dnanexus_link": {
            "stage": "stage-GF25f384b0bVZkJ2P46f79xy",
            "outputField": "filtered_vcf"
          }
        },
        "config_file": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-GFFx6Y04jKX3qpxZ3B8JFj4f"
          }
        },
        "transcript_list": {
          "$dnanexus_link": {
            "project": "project-Fkb6Gkj433GVVvj73J7x8KbV",
            "id": "file-GFPxX0Q4jKX0Jg1ZGXgXf13x"
          }
        }
      }
    },
    {
      "id": "stage-GF25ZXj4b0bxQzBjG9jJ1q77",
      "executable": "app-eggd_generate_variant_workbook/2.1.1",
      "folder": "generate_variant_workbook_v2.1.1",
      "input": {
        "vcfs": [
          {
            "$dnanexus_link": {
              "stage": "stage-GF25PqQ4b0bQjvBVP4Bb5pJ0",
              "outputField": "annotated_vcf"
            }
          }
        ],
        "exclude_columns": "ID CSQ_HGNC_ID CSQ_Allele CSQ_Feature CSQ_Mastermind_MMID3",
        "reorder_columns": "CHROM POS REF ALT FILTER QUAL DP DP_FMT VF CSQ_SYMBOL CSQ_EXON CSQ_INTRON CSQ_HGVSg CSQ_HGVSc CSQ_HGVSp CSQ_Consequence CSQ_IMPACT CSQ_CADD_PHRED CSQ_REVEL CSQ_gnomADe_AF CSQ_gnomADg_AF CSQ_ClinVar CSQ_ClinVar_CLNSIG CSQ_ClinVar_CLNDN CSQ_SpliceAI_pred_DS_AG CSQ_SpliceAI_pred_DS_AL CSQ_SpliceAI_pred_DS_DG CSQ_SpliceAI_pred_DS_DL CSQ_SpliceAI_pred_DP_AG CSQ_SpliceAI_pred_DP_AL CSQ_SpliceAI_pred_DP_DG CSQ_SpliceAI_pred_DP_DL",
        "filter": "bcftools filter -e 'INFO/DP==0 | CSQ_Consequence==\"3_prime_UTR_variant\" | CSQ_Consequence==\"5_prime_UTR_variant\" | CSQ_Consequence==\"downstream_gene_variant\" | CSQ_Consequence==\"intron_variant\" | CSQ_Consequence==\"splice_region_variant&intron_variant\" | CSQ_Consequence==\"splice_region_variant&synonymous_variant\" | CSQ_Consequence==\"synonymous_variant\" | (CSQ_SYMBOL != \"TERT\" & CSQ_Consequence==\"upstream_gene_variant\")'",
        "keep_tmp": true
      }
    }
  ]
}
